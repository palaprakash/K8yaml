apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: test-network-policy
  namespace: prod
spec:
  #podSelector:
    #matchLabels:
      #role: db
  policyTypes:
  - Ingress
  #- Egress
  ingress:
  - from:
    #- ipBlock:
        #cidr: 172.17.0.0/16
        #except:
        #- 172.17.1.0/24
    - namespaceSelector:
        matchLabels:
          name: dev
      podSelector:
        matchLabels:
          app: dev2
    ports:
    - protocol: TCP
      port: 80
# when you want to apply ingress network policy for a deployment in a namespace based on labels. pod labels are used in the pod selector attribute which is in ingress block .
# Filter is applied at namespace and pod labels level
# traffic is allowed from dev namespace, dev2 label pods to prod namespace
